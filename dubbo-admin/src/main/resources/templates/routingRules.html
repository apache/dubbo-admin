<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorator="layout/layout">
<body>
<section class="content-header" layout:fragment="content-header">
    <h1>服务路由</h1>
    <ol class="breadcrumb">
        <li>首页</li>
        <li>服务治理</li>
        <li class="active">服务路由</li>
    </ol>
</section>
<session class="content" layout:fragment="content">
    <div class="col-lg-12">
        <div class="box">
            <div class="box-body">
                <form action="#" method="get" onsubmit="">
                    <div class="input-group">
                        <input id="search-by-service" type="text" name="app" class="form-control input-lg" placeholder='请输入服务名' />
                        <div class="input-group-btn">
                            <button class="btn btn-lg btn-primary" type="button" onclick="">搜索</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="col-lg-12">
        <div class="box">
            <div class="box-header">
                <h3 class="box-title">搜索结果</h3>
                <div class="pull-right">
                    <button type="button" class="btn btn-success" data-toggle="modal" data-target="#routingRule">
                            新增路由规则
                    </button>
                </div>
            </div>
            <div class="box-body">
                <table id="search-result" class="table table-bordered table-hover">
                    <thead>
                    <tr>
                        <th>路由规则名称</th>
                        <th>服务名</th>
                        <th>优先级</th>
                        <th>状态(启用，禁用)</th>
                        <th>操作</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>Trident</td>
                        <td>Internet
                            Explorer 4.0
                        </td>
                        <td>Win 95+</td>
                        <td> 4</td>
                        <td>fjwiofjie</td>
                    </tr>
                    <tr>
                        <td>Trident</td>
                        <td>Internet
                            Explorer 5.0
                        </td>
                        <td>Win 95+</td>
                        <td>5</td>
                        <td>fjwioefj</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="modal inmodal wide-80-modal" tabindex="-1" role="dialog" aria-hidden="true" id="routingRule">
        <div class="modal-dialog">
            <div class="modal-content modal-content animated fadeIn">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">Modal title</h4>
                </div>
                <div class="modal-body">
                    <form id="df" action="create" method="POST" onsubmit="return check();">
                        <table cellpadding="0" cellspacing="0" class="info">
                            <tr>
                                <th width="100">#springMessageText("route.name", "route.name"): <font color='red'>*</font></th>
                                <td colspan="2"><input type="text" id="name" name="name" maxlength="200"/></td>
                                <td><font color='blue'>#springMessageText("RouteNameTip", "RouteNameTip")</font></td>
                            </tr>
                            <tr>
                                <th>#springMessageText("Priority", "Priority"):</th>
                                <td colspan="2">
                                    <input type="text" id="priority" name="priority" value="#if($route)$route.priority#{else}0#end"
                                           onkeydown="return checkNumber();"/>
                                </td>
                                <td><font color='blue'>#springMessageText("RoutePriorityTip", "RoutePriorityTip")</font></td>
                            </tr>
                            <tr>
                                <th>#springMessageText("service", "service"): <font color='red'>*</font></th>
                                <td colspan="2">
                                    #if($service)
                                    <input type="hidden" id="service" name="service" value="$service"/>$service
                                    #if($input)
                                    <button onclick="window.location.href='../routes/add'; return false;">#springMessageText("edit", "edit")</button>
                                    #end
                                    #else
                                    <input type="text" id="service" name="service" value="$!route.serviceName" style="ime-mode:disabled"
                                           maxlength="200"/>
                                    #if ($serviceList && $serviceList.size() > 0)
                                    <select onchange="if (this.value != '') { byId('service').value = this.value; this.value = ''; }">
                                        <option value="">#springMessageText("Choose", "Choose")</option>
                                        #foreach ($s in $serviceList)
                                        <option value="$s">$tool.getSimpleName($s)</option>
                                        #end
                                    </select>
                                    #end
                                    <button onclick="if(byId('service').value == '') { showAlert('#springMessageText("PleaseInput", "PleaseInput")#springMessageText(
                                    "ServiceName","ServiceName")', 'service'); } else if(!checkService(byId('service').value)) { showAlert('Service name can not contain , only last * is allowed', 'service'); } else { window.location.href='../services/' + byId('service').value+'/routes/add?input=true'; } return false;">#springMessageText(
                                    "getMethods","getMethods")</button>
                                    <br>
                                    <font color='blue'>#springMessageText("RouteServiceTip", "RouteServiceTip")</font>
                                    #end
                                </td>
                                <td>
                                </td>
                            </tr>
                            <tr>
                                <th>#springMessageText("methodName", "methodName"):</th>
                                <td colspan="2">
                                    <input type="text" id="method" name="method" value="" style="ime-mode:disabled"/>
                                    #if ($methods)
                                    <select onchange="if (this.value != '') { if (byId('method').value == '') { byId('method').value = this.value; } else { byId('method').value = byId('method').value + ',' + this.value; } this.value = ''; }">
                                        <option value="">#springMessageText("Choose", "Choose")</option>
                                        #foreach ($m in $methods)
                                        <option value="$m">$m</option>
                                        #end
                                    </select>
                                    #end
                                    <br>

                                </td>
                                <td>
                                    <font color='blue'>#springMessageText("RouteMethodTip", "RouteMethodTip")<font>
                                </td>
                            </tr>
                            <tr>
                                <th>#springMessageText("MatchRule","MatchRule")</th>
                                <th>#springMessageText("Match", "Match")</th>
                                <th>#springMessageText("Mismatch", "Mismatch")</th>
                                <td><font color='blue'>#springMessageText("RouteMatchTip", "RouteMatchTip")</font></td>
                            </tr>
                            <tr>
                                <th>#springMessageText("ConsumerHost", "ConsumerHost"):</th>
                                <td><input type="text" id="consumerHost" name="consumerHost" value="$!tool.getIP($address)"
                                           style="ime-mode:disabled"/></td>
                                <td><input type="text" id="unconsumerHost" name="unconsumerHost" value="" style="ime-mode:disabled"/></td>
                                <td><font color="blue">#springMessageText("RouteHostTip", "RouteHostTip")</font></td>
                            </tr>
                            <tr>
                                <th>#springMessageText("ConsumerApplication", "ConsumerApplication"):</th>
                                <td><input type="text" id="consumerApplication" name="consumerApplication" value=""
                                           style="ime-mode:disabled"/></td>
                                <td><input type="text" id="unconsumerApplication" name="unconsumerApplication" value=""
                                           style="ime-mode:disabled"/></td>
                                <td><font color="blue">#springMessageText("RouteApplicationTip", "RouteApplicationTip")</font></td>
                            </tr>
                            <tr>
                                <th>#springMessageText("ConsumerCluster", "ConsumerCluster"):</th>
                                <td>
                                    <input type="text" id="consumerCluster" name="consumerCluster" value="" style="ime-mode:disabled"/>
                                    #if ($clusterNames && $clusterNames.size() > 0)
                                    <select onchange="if (this.value != '') { if (byId('consumerCluster').value == '') { byId('consumerCluster').value = this.value; } else { byId('consumerCluster').value = byId('consumerCluster').value + ',' + this.value; } this.value = ''; }">
                                        <option value="">#springMessageText("Choose", "Choose")</option>
                                        #foreach ($c in $clusterNames)
                                        <option value="$c">$c</option>
                                        #end
                                    </select>
                                    #end
                                </td>
                                <td>
                                    <input type="text" id="unconsumerCluster" name="unconsumerCluster" value="" style="ime-mode:disabled"/>
                                    #if ($clusterNames && $clusterNames.size() > 0)
                                    <select onchange="if (this.value != '') { if (byId('unconsumerCluster').value == '') { byId('unconsumerCluster').value = this.value; } else { byId('unconsumerCluster').value = byId('unconsumerCluster').value + ',' + this.value; } this.value = ''; }">
                                        <option value="">#springMessageText("Choose", "Choose")</option>
                                        #foreach ($c in $clusterNames)
                                        <option value="$c">$c</option>
                                        #end
                                    </select>
                                    #end
                                </td>
                                <td><font color="blue">#springMessageText("RouteClusterTip","RouteClusterTip")</font></td>
                            </tr>
                            <tr>
                                <th>#springMessageText("FilterRule","FilterRule")</th>
                                <th>#springMessageText("Match","Match")</th>
                                <th>#springMessageText("Mismatch","Mismatch")</th>
                                <td><font color='blue'>#springMessageText("RouteFilterTip","RouteFilterTip")</font></td>
                            </tr>
                            <tr id="host">
                                <th>#springMessageText("ProviderHost","ProviderHost"):</th>
                                <td><input type="text" id="providerHost" value=""
                                           name="providerHost" style="ime-mode:disabled"/></td>
                                <td><input type="text" id="unproviderHost" value=""
                                           name="unproviderHost" style="ime-mode:disabled"/></td>
                                <td><font color="blue">#springMessageText("RouteHostTip","RouteHostTip")</font></td>
                            </tr>
                            <tr id="cluster">
                                <th>#springMessageText("ProviderCluster","ProviderCluster"):</th>
                                <td>
                                    <input type="text" id="providerCluster" value="" name="providerCluster" style="ime-mode:disabled"/>
                                    #if ($clusterNames && $clusterNames.size() > 0)
                                    <select onchange="if (this.value != '') { if (byId('providerCluster').value == '') { byId('providerCluster').value = this.value; } else { byId('providerCluster').value = byId('providerCluster').value + ',' + this.value; } this.value = ''; }">
                                        <option value="">#springMessageText("Choose", "Choose")</option>
                                        #foreach ($c in $clusterNames)
                                        <option value="$c">$c</option>
                                        #end
                                    </select>
                                    #end
                                </td>
                                <td>
                                    <input type="text" id="unproviderCluster" value="" name="unproviderCluster" style="ime-mode:disabled"/>
                                    #if ($clusterNames && $clusterNames.size() > 0)
                                    <select onchange="if (this.value != '') { if (byId('unproviderCluster').value == '') { byId('unproviderCluster').value = this.value; } else { byId('unproviderCluster').value = byId('unproviderCluster').value + ',' + this.value; } this.value = ''; }">
                                        <option value="">#springMessageText("Choose", "Choose")</option>
                                        #foreach ($c in $clusterNames)
                                        <option value="$c">$c</option>
                                        #end
                                    </select>
                                    #end
                                </td>
                                <td><font color="blue">#springMessageText("RouteClusterTip")</font></td>
                            </tr>
                            <tr id="protocol">
                                <th>#springMessageText("ProviderProtocol","ProviderProtocol"):</th>
                                <td><input type="text" id="providerProtocol" value=""
                                           name="providerProtocol" style="ime-mode:disabled"/></td>
                                <td><input type="text" id="unproviderProtocol" value=""
                                           name="unproviderProtocol" style="ime-mode:disabled"/></td>
                                <td></td>
                            </tr>
                            <tr id="port">
                                <th>#springMessageText("ProviderPort","ProviderPort"):</th>
                                <td><input type="text" id="providerPort" name="providerPort" value="" style="ime-mode:disabled"/>
                                </td>
                                <td><input type="text" id="unproviderPort" name="unproviderPort" value="" style="ime-mode:disabled"/></td>
                            </tr>
                            <tr>
                                <td colspan="4">
                                    <div class="btn"><a href="#" onclick="if(check()){document.getElementById('df').submit();}">#springMessageText(
                                        "save","save")</a></div>
                                </td>
                            </tr>
                        </table>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
</session>
</body>
</html>

<script src="/js/jquery-3.3.1.js"></script>
<script src="/js/bootstrap/bootstrap.min.js"></script>
